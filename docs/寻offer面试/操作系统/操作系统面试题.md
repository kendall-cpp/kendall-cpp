## 1.进程的基本状态以及它们的转化

- 就绪状态：其他资源准备好，只差CPU资源的状态就称为就绪状态，只要获得CPU的使用权，就可以独立运行。
- 执行状态：进程获得CPU资源，程序正在处理器上执行，在单处理机中(1核)，在某个时刻最多只能有一个进程正在执行
- 阻塞状态：当进程因为某种原因，比如其他设备未就绪而无法继续执行，但是并没有放弃CPU的使用权。
- 创建状态：创建进程时拥有PCB但是其他资源尚未就绪的状态。创建状态成为两步：第一步分配PCB，第二步插入就绪队列。
    > - **进程的控制块**（PCB）：用于描述和控制进程运行的通用数据结构，每个进程都有进程控制块
    > - PCB还用于记录当前状态和控制进程运行的全部信息
    > - PCB使得进程是能够独立运行的基本单位，每个进程都依赖于进程控制块去被操作系统调度
- 终止状态: 进程结束由系统清理或者归还PCB的状态，分成两步：第一步是系统清理，第二步是归还 PCB。

![](./img/进程与线程01.png)

当一个进程获取 CPU 时，就会**从就绪状态转成执行状态**，当一个进程被剥夺 CPU 时，比如系统分配的时间片被用完，或者出现优先级更高的进程，就会**由运行状态变成就绪状态**，当一个运行进程由于某事件被阻时，比如申请资源被占用、启动 I/O 传输未完成，状态就会由 **执行变成阻塞**，当所有的等待事件发生时，比如得到申请资源、I/O 参数完成，状态就由 **阻塞变成就绪**。

## 2.进程和线程的区别

- 进程是**资源调度**的基本单位，运行一个可执行程序会创建一个或者多个进程，进程就是运行起来的可执行程序。
- 线程是**程序执行**的基本单位，是轻量级的进程，每个进程中都有且仅有一个唯一的主线程，主线程和进程是相互依存的，主线程结束进程也会结束。
- **拥有资源**：不论是传统的还是引入线程的操作系统，进程都是拥有资源的基本单位，线程不拥有资源（也有一点必不可少的资源），但是线程可以共享隶属进程的系统资源。
- **并发性**：在操作系统中，系统要分配和回收资源，比如内存空间、I/O设备等，因此操作系统付出的开销远大于创建或者撤销线程的开销，而线程切换时只需要保存和设置少量寄存器内存，因此开销很小。另外，由于同一进程内的多个线程共享进程的地址空间，因此这些线程之间的同步与通信比较容易实现，甚至不需要操作系统的干预。
- **地址空间和其他资源**（比如打开的文件）：进程的地址空间之间相互独立，同一进程的各个线程间共享进程的资源，一个进程内的线程对于其他进程是不可见的。
- **通信方面**：进程间通信需要借助操作系统，而线程间可以直接读/写进程数据段（比如全局变量）来进行通信。

## 3.Linux理论上最多可以创建多少个进程？一个进程可以创建多少线程，和什么有关

32768. 因为进程的pid是用pid_t来表示的，pid_t的最大值是32768.所以理论上最多有32768个进程。

理论上，一个进程可用虚拟空间是`2G`，默认情况下，线程的栈的大小是`1MB`，所以理论上最多只能创建`2048`个线程。如果要创建多于`2048`的话，必须修改编译器的设置。

因此，一个进程可以创建的线程数由可用虚拟空间和线程的栈的大小共同决定，只要虚拟空间足够，那么新线程的建立就会成功。如果需要创建超过`2K`以上的线程，减小你线程栈的大小就可以实现了，虽然在一般情况下，你不需要那么多的线程。过多的线程将会导致大量的时间浪费在线程切换上，给程序运行效率带来负面影响。

## 4.进程通信与进程同步

### 4.1为什么需要进程通信和同步
