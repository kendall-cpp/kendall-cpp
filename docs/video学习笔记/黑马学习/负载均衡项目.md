## 1.基础TCP服务
### 1.1 项目目录的构建

```
kendall@ubuntu:~/kenworkspace/lars$ tree
.
└── lars_reactor
    ├── example
    │   ├── lars_reactor_v0_1
    │   │   ├── hello_lars
    │   │   ├── hello_lars.cpp
    │   │   └── Makefile
    │   └── lars_reactor_v0_2
    ├── include
    │   └── lars_reactor.h
    ├── lib
    │   └── libreactor.a
    ├── Makefile
    └── src
        ├── tcp_server.cpp
        └── tcp_server.o

```

rector是一个接口，最终是需要暴露出一个`.so` 和 `.a`  + `.h`的文件

首先在src下写一个暴露出来的接口`tcp_server.cpp`
```cpp
#include <iostream>
using namespace std;

//暴露出一个接口
void lars_hello() {

	cout << "lars hello" << endl;

}
```
上面是一个简单的hello接口，我们需要把它变成一个头文件。在`include`中写一个`lars_reactor.h`将这个接口暴露出来。

```cpp
#pragma once   //防止重复引用

void lars_hello();
```

编写makefile文件
```
TARGET=lib/libreactor.a
CXX=g++
CFLAGS= -g -o2 -Wall -fPIC

SRC=./src
INC=-I./include
#  basename函数去掉$(SRC)后缀名，addsuffix函数加上后缀”.o，addprefix函数加上路径信息  wildcard 查找目录下锁有的.cpp文件
OBJS=$(addsuffix .o, $(basename $(wildcard $(SRC)/*.cpp)))  # 把所有.cpp文件找出来，然后去掉后缀。再加上.o后缀

# .a文件依赖.o文件 生成静态库
$(TARGET):$(OBJS)
	# 把生成的.a文件放到lib下面，没有就创建
	mkdir -p lib
	ar cqs $@ $^

%.o:%.cpp
	$(CXX) $(CFLAGS) -c -o $@ $^ $(INC)

.PHONY: clean

clean:
	-rm -f src/*.o $(TARGET)

```

生成静态库之后，编写一个example进行测试

hello_lars.cpp

```cpp
#include "lars_reactor.h"

int main() {

	lars_hello();

	return 0;
}
```

编写makefile进行编译

```
CXX=g++
CFLAGS=-g -O2 -Wall -fPIC -Wno-deprecated 

INC=-I../../include
LIB=-L../../lib -lreactor
OBJS = $(addsuffix .o, $(basename $(wildcard *.cpp)))

all:
	$(CXX) -o hello_lars $(CFLAGS) hello_lars.cpp $(INC) $(LIB)
	# $(CXX) -o lars_reactor_test $(CFLAGS)  lars_reactor.cpp $(INC) $(LIB)

clean:
	-rm -f *.o hello_lars lars_reactor_test
```

编译运行
make		
./hello_lars


### 1.2 tcp-server基础服务开发


